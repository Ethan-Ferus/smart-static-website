# smart-static-website

We'll creating a smart static using VSCode and Terraform. 

I'll be using my-first-static-website and build on top of that.

Services used are S3 bucket, ACM (certificate manager), Cloudwatch logs, Cloudfront, Route53 and WAF.

First thing's first, create a folder and name it "smart-static-website" but you can name it whatever you want to.

# Project Layout: 
In the screenshot below, this is how the project files should look at the end of the project

<img width="218" height="669" alt="project files" src="https://github.com/user-attachments/assets/2177ba7a-5f52-4a17-9aab-3879aaa138e7" />

# Provider.tf: 
Create a provider.tf file. This is where our aws region code will be witten and it is crucial that you configure a us-east-1 provider in which i'll explain later.

<img width="288" height="81" alt="provider 1" src="https://github.com/user-attachments/assets/f1154981-6939-4dd7-abcf-8afc187ad5db" />

<img width="177" height="81" alt="provider 2" src="https://github.com/user-attachments/assets/3f385bc8-a98f-4d11-bd38-6a680fb7c94c" />

<img width="354" height="103" alt="aws_region" src="https://github.com/user-attachments/assets/f0272b37-6f9d-4a6a-a20e-260d20500f81" />

# s3.tf file:

Next, create a s3.tf file. This is where we will configure our static website but you are more than welcome to reuse my-first-static-website

In the s3.tf file, configure your s3 bucket. This bucket will host your static website and store your .html files

<img width="387" height="86" alt="s3_bucket" src="https://github.com/user-attachments/assets/44664d68-147a-45cd-9723-c9645ccdf01d" />

Next, configure a aws_s3_bucket_website_configuration resource. This resource allows and configures static website hosting on an s3 bucket but while the s3 bucket stores your HTML/CSS/JS files,this resource tells AWS how to serve them as a website.

<img width="459" height="229" alt="website_configuration" src="https://github.com/user-attachments/assets/ec12f36d-ef77-4427-b7bb-08da17943516" />

Next, configure an aws_s3_bucket_public_access_block resource. This resource is a firewall before your bucket policy, if this says "block," then even a public bucket policy won't allow access

<img width="539" height="149" alt="public access block" src="https://github.com/user-attachments/assets/61e5af90-9b34-4b51-96a5-dedaafb18e21" />

Next, configure a aws_s3_bucket_policy resource. This resource allows s3 bucket and your users to have access to your files in your bucket

<img width="549" height="268" alt="bucket_policy" src="https://github.com/user-attachments/assets/c8be079d-62ef-4ab3-b63a-e7390dab2f49" />

Next, we will configure a index object resource and a error object resource. This resource will be for our index.html and error.html files and will upload our files into an s3 bucket

<img width="313" height="120" alt="s3_index_object" src="https://github.com/user-attachments/assets/51c44edf-c1a6-493e-b0dd-b85c41fdce86" />
<img width="310" height="115" alt="s3_object_error" src="https://github.com/user-attachments/assets/e4e3d8f5-9b1e-4f3f-934e-eaa755642638" />

# Index.html and Error.html files:

Next, we need an index.html and error.html file that will be used for our static website. You are more than welcome use chatgpt for this.

<img width="267" height="206" alt="index html file" src="https://github.com/user-attachments/assets/74e3dcd0-e58a-4e8b-9a3e-2ee10a5673fb" />
<img width="490" height="274" alt="error html file" src="https://github.com/user-attachments/assets/190fcb45-eeeb-4060-95af-f444da341821" />

# acm.tf file:

Next, create a file and name it acm.tf. This file will hold our ACM configuration.An ACM resource makes it easy to provision,manage, and deploy SSL/TLS certificates for use with AWS services. SSL/TLS certificates are what enable HTTPS by encrypting data between clients and servers.

<img width="442" height="217" alt="acm_certificate" src="https://github.com/user-attachments/assets/c7f7122b-3875-4af6-a39e-0fa0803d3bd8" />

# Route53.tf:

Next, create a route53.tf file. This file will hold our route53 configurations.
Configure a aws_route53_zone resource.This resource is like a container for DNS records for a specific domain.A zone is like a folder that holds all DNS settings(records) for a domain.

<img width="423" height="100" alt="route53 zone" src="https://github.com/user-attachments/assets/a53d3314-5298-47c5-9fc4-b4a4de92ffeb" />

Next, configure a aws_route53_record. This resource is a record inside a hosted zone that maps a domain or subdomain to a destination(IP or AWS resource).

<img width="367" height="133" alt="route53 record" src="https://github.com/user-attachments/assets/78640da4-a233-4851-a81a-50e25b9117f9" />

# cloudwatch-logs.tf:
Next, create a new file and name it cloudwatch-logs.tf. This file will hold our cloudwatch configuration
A Cloudwatch log group is a container for log streams.It helps you organize,retain, and manage logs generated by your AWS resources.

<img width="602" height="220" alt="cloudwatch log group" src="https://github.com/user-attachments/assets/9e775690-f90c-4343-aab0-68d50f69aba9" />

<img width="220" height="73" alt="log_group_name" src="https://github.com/user-attachments/assets/a9a156b0-3c40-4c1d-b76d-b6be8aea070b" />

<img width="238" height="76" alt="retention_period" src="https://github.com/user-attachments/assets/cbe4927f-05ed-4ac9-9f48-72f3cf5b3acb" />

# cloudfront.tf file:
Next, create a cloudfront.tf file.This file will hold the cloudfront configuration.The Cloudfront resource caches and serves the content closer to the user, improving performance and reliability.NOTE  the provider argument reference, it is very important because cloudfront is managed in us-east-1.Create a cloudfront origin access identity as well. This resource allows cloudfront to access your private s3 bucket securely

<img width="509" height="82" alt="origin access identity" src="https://github.com/user-attachments/assets/deed687b-cb5b-4301-a2e1-77de9c33fe4b" />


<img width="846" height="539" alt="cdn top part" src="https://github.com/user-attachments/assets/9c22f9a5-4c0b-42fd-b7d9-8cfe6e35258a" />
<img width="395" height="381" alt="cdn bottem part" src="https://github.com/user-attachments/assets/debe30ee-432f-4a4a-ad30-adc815fb490f" />

# waf.tf:
Next, create a file and name it waf.tf.This file will hold our waf configuration. Create a aws_wafv2_web_acl.This resource is like a firewall for your web apps, inspecting HTTP requets and filtering bad traffic before it hits your backend.NOTE the provider argument resource. This is important because it needs to be managed in the us-east-1 region same as the cloudfront resource.

<img width="661" height="587" alt="waf top part" src="https://github.com/user-attachments/assets/ae248fd9-83e4-43a2-9ff3-771a9e99fb81" />
<img width="435" height="540" alt="waf bottem part" src="https://github.com/user-attachments/assets/2a77b5a7-c91c-4874-8d22-3c1847d116bc" />

# Deployment Stage:

When all the resources are configured and you are satified with the configuration then you will use the terraform plan command in your VSCode terminal.You have 13 resources that will be created

<img width="1004" height="644" alt="terraform plan top" src="https://github.com/user-attachments/assets/c9e67ab5-79ef-4c09-9679-ee4eea83aa8f" />
<img width="1064" height="111" alt="terraform plan bottem" src="https://github.com/user-attachments/assets/b06b4ac6-ca4d-4e34-8d81-c2f445cc64d6" />

When you are ready to deploy then we will use the terraform apply command to deploy all our resources

<img width="991" height="624" alt="terraform apply top" src="https://github.com/user-attachments/assets/be1a7bc0-b180-4077-b0f2-6d88614126d2" />
<img width="415" height="121" alt="terraform apply yes" src="https://github.com/user-attachments/assets/2bad5260-9c67-42dd-966a-54c7567bee7b" />
<img width="449" height="48" alt="terraform apply done" src="https://github.com/user-attachments/assets/67144c75-749e-4ccd-9162-43aea1f63fab" />

Below will be screenshots of the resources deployed in my AWS account

<img width="1045" height="301" alt="aws console ACM" src="https://github.com/user-attachments/assets/0f6bc000-5e3d-49aa-896e-64cfca4e6928" />
<img width="1080" height="254" alt="aws console cloudfront" src="https://github.com/user-attachments/assets/ebe82835-2cc6-4a7c-a4b8-2e3ebb7fd13d" />
<img width="1077" height="279" alt="aws console route53" src="https://github.com/user-attachments/assets/7602c457-8b71-4b04-9fb1-e9050a93edf9" />
<img width="1042" height="388" alt="aws console s3 bucket" src="https://github.com/user-attachments/assets/3d0ce8ce-2a04-4f36-90aa-8fd0ec8ace2d" />
<img width="1030" height="573" alt="aws console s3 bucket objects" src="https://github.com/user-attachments/assets/ddf27b7a-be94-4b97-a254-1f8a2b93f945" />
<img width="1366" height="768" alt="aws console index file" src="https://github.com/user-attachments/assets/6202f6b5-ff85-4faf-aca5-5f913931d7c5" />
<img width="1366" height="768" alt="aws console error file" src="https://github.com/user-attachments/assets/3f51ba66-4e1d-4abc-9c0c-3f6aa02a1ec0" />

Make sure once you're done you use the terraform destroy command to delete the resources from your aws console not to incur costs

<img width="975" height="240" alt="terraform destroy top" src="https://github.com/user-attachments/assets/8ef1b726-af33-4436-b5eb-3dff5bb1f096" />
<img width="535" height="125" alt="terraform destroy yes" src="https://github.com/user-attachments/assets/cabd055d-be89-46b8-a337-b12451b8615a" />
<img width="648" height="637" alt="terraform destroy done" src="https://github.com/user-attachments/assets/1082cbe6-6f28-4158-8313-e7f75b2b3b3c" />
